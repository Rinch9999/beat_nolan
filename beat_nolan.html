<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>暴打乔纳森·诺兰</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(to bottom, #1a2a6c, #b21f1f, #fdbb2d);
            color: white;
            text-align: center;
            margin: 0;
            padding: 20px;
            overflow: hidden;
            user-select: none;
        }

        #gameContainer {
            position: relative;
            width: 800px;
            height: 500px;
            margin: 20px auto;
            border: 3px solid #fff;
            border-radius: 10px;
            background-color: rgba(0, 0, 0, 0.5);
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.5);
        }

        #target {
            position: absolute;
            width: 100px;
            height: 100px;
            cursor: pointer;
            transition: transform 0.1s;
            /* 背景图片将在JS中动态设置 */
            background-size: cover;
            background-position: center;
            border-radius: 50%;
        }

        #target:hover {
            transform: scale(1.1);
        }

        #ui {
            display: flex;
            justify-content: space-around;
            margin-bottom: 20px;
            font-size: 1.5em;
        }

        #startButton, #restartButton {
            padding: 15px 30px;
            font-size: 1.2em;
            background-color: #e74c3c;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            margin: 10px;
            transition: background-color 0.3s;
        }

        #startButton:hover, #restartButton:hover {
            background-color: #c0392b;
        }

        #message {
            font-size: 2em;
            font-weight: bold;
            margin-top: 20px;
            min-height: 60px;
            color: #fdbb2d;
            text-shadow: 2px 2px 4px #000;
        }

        #restartButton {
            display: none;
        }
    </style>
</head>
<body>
    <h1>暴打乔纳森·诺兰</h1>
    <p>在60秒内，尽情点击那个让你烧脑的“罪魁祸首”！</p>

    <div id="ui">
        <div>时间: <span id="timer">60</span>秒</div>
        <div>分数: <span id="score">0</span></div>
    </div>

    <button id="startButton">开始游戏！</button>
    <button id="restartButton">再玩一次？</button>

    <div id="gameContainer">
        <div id="target"></div>
    </div>

    <div id="message"></div>

    <script>
        // 获取DOM元素
        const startButton = document.getElementById('startButton');
        const restartButton = document.getElementById('restartButton');
        const timerDisplay = document.getElementById('timer');
        const scoreDisplay = document.getElementById('score');
        const target = document.getElementById('target');
        const messageDisplay = document.getElementById('message');
        const gameContainer = document.getElementById('gameContainer');

        // 游戏变量
        let score = 0;
        let timeLeft = 60;
        let gameActive = false;
        let timerId;
        let moveTimerId;

        // 乔纳森·诺兰的图片URL (请确保使用你有权使用的图片，这里用一个本地图片路径示例)
        // 建议把图片放在项目的 `image` 文件夹下并命名为 `nolan.jpg`，然后使用相对路径引用。
        const nolanImageUrl = './image/nolan.jpg';

        // （已移除音效）

        // 设置目标的图片
        target.style.backgroundImage = `url('${nolanImageUrl}')`;

        // 移动目标的函数
        function moveTarget() {
            if (!gameActive) return;

            const containerRect = gameContainer.getBoundingClientRect();
            const targetRect = target.getBoundingClientRect();

            const maxX = containerRect.width - targetRect.width;
            const maxY = containerRect.height - targetRect.height;

            const randomX = Math.floor(Math.random() * maxX);
            const randomY = Math.floor(Math.random() * maxY);

            target.style.left = `${randomX}px`;
            target.style.top = `${randomY}px`;
        }

        // 目标被点击时的函数
        function hitTarget() {
            if (!gameActive) return;

            score++;
            scoreDisplay.textContent = score;

            // （音效已移除，保留视觉反馈）

            // 添加一个被击中的动画效果
            target.style.transform = 'scale(0.9)';
            setTimeout(() => {
                target.style.transform = 'scale(1)';
            }, 100);

            // 击中后立即移动
            moveTarget();
        }

        // 更新计时器
        function updateTimer() {
            timeLeft--;
            timerDisplay.textContent = timeLeft;

            if (timeLeft <= 0) {
                endGame();
            }
        }

        // 开始游戏
        function startGame() {
            gameActive = true;
            score = 0;
            timeLeft = 60;
            scoreDisplay.textContent = score;
            timerDisplay.textContent = timeLeft;
            messageDisplay.textContent = "";
            startButton.style.display = 'none';
            restartButton.style.display = 'none';

            // 启动计时器
            timerId = setInterval(updateTimer, 1000);
            // 启动移动，并设置一个更快的移动间隔
            moveTimerId = setInterval(moveTarget, 800); // 每800毫秒移动一次

            // 初始移动一次
            moveTarget();
        }

        // 结束游戏
        function endGame() {
            gameActive = false;
            clearInterval(timerId);
            clearInterval(moveTimerId);

            let message = "";
            if (score > 50) {
                message = "天呐！你是个无情的暴打机器！诺兰的叙事迷宫被你彻底砸烂了！";
            } else if (score > 30) {
                message = "干得漂亮！你成功让诺兰体验了一次他自己的非线性叙事！";
            } else if (score > 15) {
                message = "不错！但诺兰可能还在构思更烧脑的剧情来报复你。";
            } else {
                message = "呃...你是不是被他的剧情绕晕了，没力气打了？";
            }
            messageDisplay.textContent = `游戏结束！你的最终得分是：${score}。${message}`;

            restartButton.style.display = 'inline-block';
        }

        // 事件监听
        startButton.addEventListener('click', startGame);
        restartButton.addEventListener('click', startGame);
        target.addEventListener('click', hitTarget);

        // 音效已移除 — 不再预加载声音
    </script>
</body>
</html>